# ëª¨ì„ ë§¤ë‹ˆì € v2 ê°œë°œ ë¡œë“œë§µ

> ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2026-02-27
> ë²„ì „: v2.3

## í”„ë¡œì íŠ¸ ê°œìš”

v1ì—ì„œ MVP í•µì‹¬ ê¸°ëŠ¥(ì´ë²¤íŠ¸ CRUD, ì´ˆëŒ€ ì½”ë“œ, ì°¸ì—¬ ì‹œìŠ¤í…œ, ê³µì§€/ëŒ“ê¸€, ì°¸ì—¬ì ê´€ë¦¬)ì„ ì™„ì„±í•œ ì´í›„,
v2ì—ì„œëŠ” ì„¸ ê°€ì§€ ì¶•ì„ ì¤‘ì‹¬ìœ¼ë¡œ ê°œì„ í•œë‹¤.

1. **ë²„ê·¸ ë° ì—£ì§€ì¼€ì´ìŠ¤ ìˆ˜ì •**: ì£¼ìµœì ì´ˆëŒ€ ë§í¬ ê²½í—˜ ëˆ„ë½, ìƒíƒœ ê²€ì¦ ë¯¸ë¹„, Race Condition ë“±
   ì‹¤ì œ ìš´ì˜ ì‹œ ë°œìƒí•  ë¬¸ì œë“¤ì„ ì„ ì œì ìœ¼ë¡œ ì œê±°í•œë‹¤.
2. **UX í’ˆì§ˆ í†µì¼**: alert()ê³¼ toastê°€ í˜¼ì¬í•˜ëŠ” ì•Œë¦¼ ì²´ê³„ë¥¼ í†µì¼í•˜ê³ , ì—­í•  í‘œì‹œ ë° ì—ëŸ¬ ë©”ì‹œì§€ë¥¼
   ì¼ê´€ë˜ê²Œ ê°œì„ í•˜ì—¬ ì‚¬ìš©ìê°€ ì„œë¹„ìŠ¤ë¥¼ ì‹ ë¢°í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
3. **ê¸°ëŠ¥ í™•ì¥**: ì´ë²¤íŠ¸ ë³µì œ, ëª©ë¡ í•„í„°/ê²€ìƒ‰, ì¶œì„ ì²´í¬, ê±°ì ˆ ì‚¬ìœ  ë“± ì‹¤ì œ ëª¨ì„ ìš´ì˜ì—
   í•„ìš”í•œ ê¸°ëŠ¥ì„ ìˆœì°¨ì ìœ¼ë¡œ ì¶”ê°€í•œë‹¤.

Phase 4(ì•Œë¦¼, ëŒ€ê¸°ì—´, í‰ê°€ ë“± ê³ ê¸‰ ê¸°ëŠ¥)ëŠ” Phase 1~3 ì™„ë£Œ ì´í›„ì— ì°©ìˆ˜í•˜ë©°,
ë°°í¬ëŠ” ì‚¬ìš©ì íŒë‹¨ì— ë”°ë¼ ë³„ë„ ì§„í–‰í•œë‹¤.

---

## ì„±ê³µ ì§€í‘œ (KPI)

- ì£¼ìµœìê°€ ë³¸ì¸ ì´ˆëŒ€ ë§í¬ ì ‘ì† ì‹œ ê´€ë¦¬ ê¸°ëŠ¥ì— 3ì´ˆ ì´ë‚´ ì§„ì… ê°€ëŠ¥
- `alert()` ì‚¬ìš© ê±´ìˆ˜ 0ê±´ (ì „ëŸ‰ toastë¡œ ëŒ€ì²´)
- `approveParticipant` / `rejectParticipant` ì´ì¤‘ ì²˜ë¦¬ ì—ëŸ¬ ë°œìƒ 0ê±´
- ì´ë²¤íŠ¸ ë³µì œ ì‹œ ì‹ ê·œ ì´ë²¤íŠ¸ ìƒì„±ê¹Œì§€ì˜ í´ë¦­ ìˆ˜ 3íšŒ ì´ë‚´
- `npm run validate` í†µê³¼ (íƒ€ì… ì˜¤ë¥˜ 0ê±´, ë¦°íŠ¸ ì˜¤ë¥˜ 0ê±´) ìƒíƒœë¡œ ê° Phase ì™„ë£Œ

---

## ê¸°ìˆ  ìŠ¤íƒ (v1 ìœ ì§€)

| ë ˆì´ì–´      | ê¸°ìˆ                                    |
| ----------- | -------------------------------------- |
| í”„ë ˆì„ì›Œí¬  | Next.js 15 (App Router)                |
| ì–¸ì–´        | TypeScript 5.6+                        |
| ìŠ¤íƒ€ì¼ë§    | Tailwind CSS v3 + shadcn/ui (new-york) |
| í¼ ê´€ë¦¬     | React Hook Form 7.x + Zod              |
| ë°±ì—”ë“œ      | Supabase (PostgreSQL + RLS + Auth)     |
| íŒ¨í‚¤ì§€ ê´€ë¦¬ | npm                                    |

---

## ì¶”ê°€ ì„¤ì¹˜ íŒ¨í‚¤ì§€

```bash
# toast ì•Œë¦¼ ì‹œìŠ¤í…œ (Phase 2)
npx shadcn@latest add sonner
```

---

## ê°œë°œ ë¡œë“œë§µ

### Phase 1: ë²„ê·¸ ìˆ˜ì • ë° ì—£ì§€ì¼€ì´ìŠ¤ ì²˜ë¦¬ (1ì£¼) âœ… ì™„ë£Œ

**ëª©í‘œ**: ì‹¤ì œ ìš´ì˜ ì‹œ ë°œìƒí•˜ëŠ” ë²„ê·¸ì™€ ë³´ì•ˆ/ì •í•©ì„± ë¬¸ì œë¥¼ ì„ ì œì ìœ¼ë¡œ ì œê±°í•œë‹¤.
ê°€ì¥ ì˜í–¥ë„ê°€ ë†’ì€ "invite í˜ì´ì§€ ì£¼ìµœì ê²½í—˜ ëˆ„ë½"ê³¼ ìƒíƒœ ê²€ì¦ ë¯¸ë¹„, ì´ë¯¸ì§€ ë¡¤ë°± ëˆ„ë½ì„
ì´ Phaseì—ì„œ ì™„ì „íˆ í•´ê²°í•œë‹¤.

**ì™„ë£Œ ê¸°ì¤€**:

- ì£¼ìµœìê°€ `/invite/[code]`ë¡œ ì§„ì… ì‹œ ì°¸ì—¬ ì‹ ì²­ ë²„íŠ¼ ëŒ€ì‹  ê´€ë¦¬ ì•¡ì…˜ íŒ¨ë„ì´ í‘œì‹œë¨
- `completed` ìƒíƒœ ì´ë²¤íŠ¸ì— `joinEvent` í˜¸ì¶œ ì‹œ ì—ëŸ¬ ë°˜í™˜
- `approveParticipant` í˜¸ì¶œ ì‹œ ì´ë¯¸ `approved`/`rejected` ìƒíƒœì´ë©´ ì—ëŸ¬ ë°˜í™˜
- ì´ë²¤íŠ¸ ì €ì¥ ì‹¤íŒ¨ ì‹œ ì—…ë¡œë“œëœ ì´ë¯¸ì§€ê°€ Storageì—ì„œ ìë™ ì •ë¦¬ë¨
- `npm run validate` í†µê³¼

#### íƒœìŠ¤í¬

**1-1. invite í˜ì´ì§€ ì£¼ìµœì ê²½í—˜ ê°œì„ **

- [x] `app/(protected)/events/actions.ts` ìˆ˜ì •: `getEventByInviteCode` SELECT ì¿¼ë¦¬ì— `host_id` í•„ë“œ ì¶”ê°€, `InviteEventData` ë°˜í™˜ íƒ€ì…ì— `host_id: string` í¬í•¨ | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.5d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ
- [x] `app/(protected)/events/schemas.ts` ìˆ˜ì •: `InviteEventData` íƒ€ì…ì— `host_id: string` í•„ë“œ ì¶”ê°€ | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ
- [x] `app/invite/[code]/page.tsx` ìˆ˜ì •: `authData.claims.sub`ì™€ `result.host_id` ë¹„êµí•˜ì—¬ `isHost` ë„ì¶œ, í•˜ë‹¨ UIë¥¼ `isHost` ë¶„ê¸°ë¡œ êµì²´ (isHostì´ë©´ `HostActionPanel`, ì•„ë‹ˆë©´ ê¸°ì¡´ `JoinButton`) | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 1d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ
- [x] `components/events/host-action-panel.tsx` ì‹ ê·œ ìƒì„±: ì´ˆëŒ€ í˜ì´ì§€ì—ì„œ ì£¼ìµœìì—ê²Œ í‘œì‹œí•˜ëŠ” ê´€ë¦¬ ì•¡ì…˜ íŒ¨ë„ (ì°¸ì—¬ì ê´€ë¦¬ Link, ì´ë²¤íŠ¸ ìˆ˜ì • Link, CancelEventButton ì¬ì‚¬ìš©) | ë‹´ë‹¹: í”„ë¡ íŠ¸ì—”ë“œ | ì˜ˆìƒ: 0.5d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ

**1-2. joinEvent ìƒíƒœ ê²€ì¦ ê°•í™”**

- [x] `app/(protected)/events/actions.ts` ìˆ˜ì •: `joinEvent` í•¨ìˆ˜ ë‚´ ìƒíƒœ ì²´í¬ë¥¼ `event.status !== 'active'`ë¡œ êµì²´í•˜ì—¬ cancelled/completed ì´ë²¤íŠ¸ ëª¨ë‘ ì°¸ì—¬ ë°©ì§€ (`"ì§„í–‰ ì¤‘ì¸ ì´ë²¤íŠ¸ê°€ ì•„ë‹™ë‹ˆë‹¤."` ì—ëŸ¬ ë°˜í™˜) | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ

**1-3. approveParticipant ì´ì¤‘ ì²˜ë¦¬ ë°©ì§€**

- [x] `app/(protected)/events/actions.ts` ìˆ˜ì •: `approveParticipant` í•¨ìˆ˜ ë‚´ ì •ì› ì²´í¬ ì´ì „ì— í˜„ì¬ participant `status` ì¡°íšŒ ì¶”ê°€, `pending`ì´ ì•„ë‹ˆë©´ `"ì´ë¯¸ ì²˜ë¦¬ëœ ì‹ ì²­ì…ë‹ˆë‹¤."` ì—ëŸ¬ ë°˜í™˜ | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ
- [x] `app/(protected)/events/actions.ts` ìˆ˜ì •: `rejectParticipant` í•¨ìˆ˜ì—ë„ ë™ì¼ íŒ¨í„´ ì ìš© (`pending`ì´ ì•„ë‹ˆë©´ ì—ëŸ¬ ë°˜í™˜) | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ

**1-4. ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œ Storage ë¡¤ë°±**

- [x] `lib/supabase/storage-server.ts` ì‹ ê·œ ìƒì„±: ì„œë²„ ì•¡ì…˜ì—ì„œ í˜¸ì¶œ ê°€ëŠ¥í•œ ì´ë¯¸ì§€ ì‚­ì œ í—¬í¼ í•¨ìˆ˜ (`deleteEventImageServer`) - `createClient` ì„œë²„ ë²„ì „ìœ¼ë¡œ `storage.from().remove()` í˜¸ì¶œ | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.5d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ
- [x] `app/(protected)/events/actions.ts` ìˆ˜ì •: `createEvent` í•¨ìˆ˜ì—ì„œ ì´ë²¤íŠ¸ INSERT ì‹¤íŒ¨ ì‹œ `cover_image_url`ì´ ìˆìœ¼ë©´ `deleteEventImageServer` í˜¸ì¶œí•˜ì—¬ ê³ ì•„ íŒŒì¼ ì •ë¦¬ | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.5d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ

**1-5. Phase 1 ê²€ì¦**

- [x] `npm run validate` ì‹¤í–‰ ë° ì˜¤ë¥˜ ìˆ˜ì • | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ

---

### Phase 2: UX í’ˆì§ˆ ê°œì„  (1ì£¼) âœ… ì™„ë£Œ

**ëª©í‘œ**: ì‚¬ìš©ì í”¼ë“œë°±(ì•Œë¦¼, ì—ëŸ¬ ë©”ì‹œì§€, ì—­í•  í‘œì‹œ)ì„ ì¼ê´€ë˜ê²Œ ì •ë¹„í•˜ì—¬ ì„œë¹„ìŠ¤ ì‹ ë¢°ë„ë¥¼ ë†’ì¸ë‹¤.
`alert()` ì „ëŸ‰ ì œê±°, toast ì‹œìŠ¤í…œ ë„ì…, ì´ë²¤íŠ¸ ëª©ë¡ ì—­í•  ë°°ì§€ ì¶”ê°€.

**ì™„ë£Œ ê¸°ì¤€**:

- ì½”ë“œë² ì´ìŠ¤ ì „ì²´ì—ì„œ `alert()`, `confirm()` í˜¸ì¶œ 0ê±´
- ì„œë²„ ì•¡ì…˜ ì„±ê³µ/ì‹¤íŒ¨ ì‹œ toast ì•Œë¦¼ í‘œì‹œ (ìŠ¹ì¸, ê±°ì ˆ, ì°¸ì—¬ ì·¨ì†Œ, ì´ë²¤íŠ¸ ì·¨ì†Œ)
- ì´ë²¤íŠ¸ ëª©ë¡ "ì „ì²´ ì´ë²¤íŠ¸" íƒ­ì—ì„œ ë³¸ì¸ ì£¼ìµœ/ì°¸ì—¬ ì´ë²¤íŠ¸ì— ì—­í•  ë°°ì§€ í‘œì‹œ
- `approveParticipant` ì‹¤íŒ¨ ì‹œ êµ¬ì²´ì  ì—ëŸ¬ ë©”ì‹œì§€ (ì •ì› ì´ˆê³¼, ì´ë¯¸ ì²˜ë¦¬ ë“±) í‘œì‹œ
- `npm run validate` í†µê³¼

#### íƒœìŠ¤í¬

**2-1. Sonner(toast) ì„¤ì¹˜ ë° ì„¤ì •**

- [x] `npx shadcn@latest add sonner` ì‹¤í–‰, `app/layout.tsx`ì— `<Toaster />` ì¶”ê°€ | ë‹´ë‹¹: í”„ë¡ íŠ¸ì—”ë“œ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ
- [x] `lib/hooks/use-action-toast.ts` ì‹ ê·œ ì‘ì„±: ì„œë²„ ì•¡ì…˜ ê²°ê³¼ `{ error: string } | { success: true }`ë¥¼ ë°›ì•„ ìë™ìœ¼ë¡œ toast í˜¸ì¶œí•˜ëŠ” ìœ í‹¸ í›… | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.5d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ

**2-2. ParticipantList alert() â†’ toast ì „í™˜**

- [x] `components/events/participant-list.tsx` ìˆ˜ì •: `handleApprove`, `handleReject` ë‚´ `alert(result.error)` ì œê±°, `toast.success` / `toast.error`ë¡œ êµì²´ (ìŠ¹ì¸ ì„±ê³µ/ì‹¤íŒ¨, ê±°ì ˆ ì„±ê³µ/ì‹¤íŒ¨ ë©”ì‹œì§€ êµ¬ì²´í™”) | ë‹´ë‹¹: í”„ë¡ íŠ¸ì—”ë“œ | ì˜ˆìƒ: 0.5d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ

**2-3. CancelEventButton, CancelParticipationButton toast í†µì¼**

- [x] `components/events/cancel-event-button.tsx` ìˆ˜ì •: ì´ë²¤íŠ¸ ì·¨ì†Œ ì„±ê³µ/ì‹¤íŒ¨ toast ì ìš© (AlertDialog ìœ ì§€) | ë‹´ë‹¹: í”„ë¡ íŠ¸ì—”ë“œ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„
- [x] `components/events/cancel-participation-button.tsx` ìˆ˜ì •: ì°¸ì—¬ ì·¨ì†Œ ì„±ê³µ/ì‹¤íŒ¨ toast ì ìš© | ë‹´ë‹¹: í”„ë¡ íŠ¸ì—”ë“œ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„

**2-4. ì´ë²¤íŠ¸ ëª©ë¡ ì—­í•  ë°°ì§€ í‘œì‹œ**

- [x] `app/(protected)/events/actions.ts` ìˆ˜ì •: `getAllEvents` ë°˜í™˜ íƒ€ì…ì— `myRole?: 'host' | 'participant' | null` ì¶”ê°€, í˜„ì¬ ì‚¬ìš©ìì˜ host_id/ì°¸ì—¬ ì—¬ë¶€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•„ë“œ ì±„ì›€ | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.75d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„
- [x] `components/events/event-card.tsx` ìˆ˜ì •: `myRole` prop ì¶”ê°€, `host`ì´ë©´ "ì£¼ìµœ" ë°°ì§€, `participant`ì´ë©´ "ì°¸ì—¬ ì¤‘" ë°°ì§€ë¥¼ ì¹´ë“œ ìƒë‹¨ì— ì˜¤ë²„ë ˆì´ í‘œì‹œ | ë‹´ë‹¹: í”„ë¡ íŠ¸ì—”ë“œ | ì˜ˆìƒ: 0.5d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„
- [x] `app/(protected)/events/page.tsx` ìˆ˜ì •: ì „ì²´ ì´ë²¤íŠ¸ íƒ­ì—ì„œ `myRole` ì „ë‹¬ | ë‹´ë‹¹: í”„ë¡ íŠ¸ì—”ë“œ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„

**2-5. ì—ëŸ¬ ë©”ì‹œì§€ êµ¬ì²´í™”**

- [x] `app/(protected)/events/actions.ts` ìˆ˜ì •: `cancelParticipation`ì—ì„œ ì´ë¯¸ `cancelled` ìƒíƒœ í˜¸ì¶œ ì‹œ `"ì´ë¯¸ ì·¨ì†Œëœ ì°¸ì—¬ì…ë‹ˆë‹¤."` ì—ëŸ¬ ì¶”ê°€ | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„

**2-6. Phase 2 ê²€ì¦**

- [x] ì „ì²´ ì½”ë“œë² ì´ìŠ¤ `alert(` ë¬¸ìì—´ grep ê²€ìƒ‰ìœ¼ë¡œ ì”ì¡´ ì—¬ë¶€ í™•ì¸ (0ê±´ í™•ì¸) | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ
- [x] `npm run validate` ì‹¤í–‰ ë° ì˜¤ë¥˜ ìˆ˜ì • | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ

---

### Phase 3: ì‹ ê·œ ê¸°ëŠ¥ ì¶”ê°€ (2ì£¼) âœ… ì™„ë£Œ

**ëª©í‘œ**: ì‹¤ì œ ëª¨ì„ ìš´ì˜ì— í•„ìš”í•œ 4ê°€ì§€ ì‹ ê·œ ê¸°ëŠ¥ì„ ì¶”ê°€í•œë‹¤.
ì´ë²¤íŠ¸ ë³µì œë¡œ ë°˜ë³µ ëª¨ì„ ìƒì„± ë¶€ë‹´ ê°ì†Œ, í•„í„°/ê²€ìƒ‰ìœ¼ë¡œ ì´ë²¤íŠ¸ íƒìƒ‰ ê°œì„ ,
ì¶œì„ ì²´í¬ì™€ ê±°ì ˆ ì‚¬ìœ ë¡œ ì°¸ì—¬ì ê´€ë¦¬ ê¹Šì´ë¥¼ ë†’ì¸ë‹¤.

**ì™„ë£Œ ê¸°ì¤€**:

- ì´ë²¤íŠ¸ ìƒì„¸ í˜ì´ì§€ ì£¼ìµœì ì˜ì—­ì— "ì´ ì´ë²¤íŠ¸ ë³µì œ" ë²„íŠ¼ í‘œì‹œ, í´ë¦­ ì‹œ ì‹ ê·œ ì´ë²¤íŠ¸ ìƒì„± í¼ prefill
- ì´ë²¤íŠ¸ ëª©ë¡ ìƒë‹¨ í•„í„° UIì—ì„œ ê²€ìƒ‰ì–´/ìƒíƒœ ì ìš© í›„ ê²°ê³¼ ì¦‰ì‹œ ë°˜ì˜
- ì°¸ì—¬ì ê´€ë¦¬ í˜ì´ì§€ ìŠ¹ì¸ ëª©ë¡ì—ì„œ ì¶œì„ ì²´í¬ í† ê¸€, DB ë°˜ì˜
- ê±°ì ˆ ì‹œ ì‚¬ìœ  ì…ë ¥ ëª¨ë‹¬ í‘œì‹œ, ê±°ì ˆ ì‚¬ìœ ê°€ `event_participants.rejection_reason`ì— ì €ì¥ë¨
- `npm run validate` í†µê³¼

#### íƒœìŠ¤í¬

**3-1. ì´ë²¤íŠ¸ ë³µì œ**

- [x] `app/(protected)/events/[id]/page.tsx` ìˆ˜ì •: ì£¼ìµœì ì•¡ì…˜ ì˜ì—­ì— "ë³µì œ" ë²„íŠ¼ ì¶”ê°€, í´ë¦­ ì‹œ `/events/new?from=[id]`ë¡œ ì´ë™ | ë‹´ë‹¹: í”„ë¡ íŠ¸ì—”ë“œ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ
- [x] `app/(protected)/events/new/page.tsx` ìˆ˜ì •: `searchParams.from` ê°’ì´ ìˆìœ¼ë©´ `getEventById`ë¡œ ì›ë³¸ ì´ë²¤íŠ¸ ì¡°íšŒ í›„ `EventForm` `defaultValues`ë¡œ ì „ë‹¬ (ë‹¨, `event_date`, `event_time`, `cover_image_url` ì œì™¸) | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.5d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ

**3-2. ì´ë²¤íŠ¸ ëª©ë¡ í•„í„°/ê²€ìƒ‰**

- [x] `app/(protected)/events/actions.ts` ìˆ˜ì •: `getAllEvents` í•¨ìˆ˜ì— `options?: { search?: string; status?: string }` íŒŒë¼ë¯¸í„° ì¶”ê°€, Supabase `.ilike`, `.eq` ì²´ì´ë‹ìœ¼ë¡œ ì„œë²„ ì‚¬ì´ë“œ í•„í„° | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 1d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„
- [x] `components/events/event-filter.tsx` ì‹ ê·œ ìƒì„±: ê²€ìƒ‰ì–´ Input, ìƒíƒœ Selectë¡œ êµ¬ì„±ëœ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸, onChange ì‹œ URL searchParams ì—…ë°ì´íŠ¸ (`useRouter`) | ë‹´ë‹¹: í”„ë¡ íŠ¸ì—”ë“œ | ì˜ˆìƒ: 1.5d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„
- [x] `app/(protected)/events/page.tsx` ìˆ˜ì •: `searchParams` prop ì¶”ê°€, `EventFilter` ì»´í¬ë„ŒíŠ¸ ì‚½ì…, ì „ì²´ ì´ë²¤íŠ¸ íƒ­ì— í•„í„° íŒŒë¼ë¯¸í„° ì „ë‹¬ | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.5d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„

**3-3. ì¶œì„ ì²´í¬**

- [x] Supabase migration: `event_participants` í…Œì´ë¸”ì— `attended boolean DEFAULT false` ì»¬ëŸ¼ ì¶”ê°€ | ë‹´ë‹¹: ë°±ì—”ë“œ | ì˜ˆìƒ: 0.5d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„
- [x] `lib/types/database.ts` ì¬ìƒì„±: `npx supabase gen types typescript` ì‹¤í–‰ | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ
- [x] `app/(protected)/events/actions.ts` ìˆ˜ì •: `toggleAttendance(participantId, eventId, attended)` Server Action ì¶”ê°€ (host_id ê²€ì¦ í¬í•¨) | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.5d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„
- [x] `app/(protected)/events/schemas.ts` ìˆ˜ì •: `ParticipantWithProfile` íƒ€ì…ì— `attended: boolean` í•„ë“œ ì¶”ê°€ | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„
- [x] `components/events/participant-list.tsx` ìˆ˜ì •: `showAttendance?: boolean` prop ì¶”ê°€, approved ëª©ë¡ ê° í–‰ì— ì¶œì„ Checkbox í‘œì‹œ ë° `toggleAttendance` ì•¡ì…˜ ì—°ê²° | ë‹´ë‹¹: í”„ë¡ íŠ¸ì—”ë“œ | ì˜ˆìƒ: 0.75d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„
- [x] `app/(protected)/events/[id]/manage/page.tsx` ìˆ˜ì •: approved íƒ­ì˜ `ParticipantList`ì— `showAttendance={true}` ì „ë‹¬ | ë‹´ë‹¹: í”„ë¡ íŠ¸ì—”ë“œ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„

**3-4. ê±°ì ˆ ì‚¬ìœ  ì…ë ¥ ë° í‘œì‹œ**

- [x] Supabase migration: `event_participants` í…Œì´ë¸”ì— `rejection_reason text DEFAULT NULL` ì»¬ëŸ¼ ì¶”ê°€ (3-3 migrationê³¼ í•¨ê»˜ ì²˜ë¦¬) | ë‹´ë‹¹: ë°±ì—”ë“œ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„
- [x] `lib/types/database.ts` ì¬ìƒì„± (3-3ê³¼ í†µí•©) | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ
- [x] `app/(protected)/events/actions.ts` ìˆ˜ì •: `rejectParticipant` ì‹œê·¸ë‹ˆì²˜ì— `reason?: string` íŒŒë¼ë¯¸í„° ì¶”ê°€, UPDATE ì‹œ `rejection_reason` í¬í•¨ | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„
- [x] `components/events/reject-dialog.tsx` ì‹ ê·œ ìƒì„±: AlertDialog ê¸°ë°˜, "ê±°ì ˆ ì‚¬ìœ  (ì„ íƒ)" Textarea í¬í•¨, í™•ì¸ ì‹œ `rejectParticipant(id, eventId, reason)` í˜¸ì¶œ | ë‹´ë‹¹: í”„ë¡ íŠ¸ì—”ë“œ | ì˜ˆìƒ: 1d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„
- [x] `components/events/participant-list.tsx` ìˆ˜ì •: ê¸°ì¡´ "ê±°ì ˆ" ë²„íŠ¼ì„ `RejectDialog`ë¡œ êµì²´, rejected ëª©ë¡ì—ì„œ `rejection_reason` ìˆìœ¼ë©´ ì´ë¦„ ì•„ë˜ í‘œì‹œ | ë‹´ë‹¹: í”„ë¡ íŠ¸ì—”ë“œ | ì˜ˆìƒ: 0.5d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„

**3-5. Phase 3 ê²€ì¦**

- [x] DB ì»¬ëŸ¼ ì¶”ê°€ í›„ íƒ€ì… ì¬ìƒì„± í™•ì¸ | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ
- [x] `npm run validate` ì‹¤í–‰ ë° ì˜¤ë¥˜ ìˆ˜ì • | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.5d | ìš°ì„ ìˆœìœ„: ğŸ”´ë†’ìŒ

---

### Phase 4: ê³ ê¸‰ ê¸°ëŠ¥ (3~4ì£¼) â€” ì„ íƒì  êµ¬í˜„

**ëª©í‘œ**: ì•Œë¦¼, ëŒ€ê¸°ì—´ ìë™ ìŠ¹ì¸, ì´ë²¤íŠ¸ í‰ê°€, QR ì½”ë“œ ì²´í¬ì¸ ë“±
ìš´ì˜ í¸ì˜ë¥¼ ê·¹ëŒ€í™”í•˜ëŠ” ê³ ê¸‰ ê¸°ëŠ¥ì„ ë‹¨ê³„ì ìœ¼ë¡œ ì¶”ê°€í•œë‹¤.
Phase 1~3 ì™„ë£Œ ì´í›„ì— í•„ìš”ì— ë”°ë¼ ì„ íƒì ìœ¼ë¡œ êµ¬í˜„í•œë‹¤.

**ì™„ë£Œ ê¸°ì¤€ (í•˜ìœ„ íƒœìŠ¤í¬ë³„ ë…ë¦½ ì™„ë£Œ ê°€ëŠ¥)**:

- ì•Œë¦¼: ì°¸ì—¬ ì‹ ì²­ ì‹œ ì£¼ìµœìì—ê²Œ ì¸ì•± ì•Œë¦¼ ìƒì„±, ìŠ¹ì¸/ê±°ì ˆ ì‹œ ì°¸ì—¬ì ì•Œë¦¼ ìƒì„±
- ëŒ€ê¸°ì—´: ì •ì› ë§ˆê° ì´ë²¤íŠ¸ì— "ëŒ€ê¸° ë“±ë¡" ê¸°ëŠ¥, ìŠ¹ì¸ ì·¨ì†Œ ì‹œ ëŒ€ê¸°ì ìë™ ìˆœë²ˆ ì•Œë¦¼
- í‰ê°€: completed ì´ë²¤íŠ¸ì— ì°¸ì—¬ì ë³„ì /ì½”ë©˜íŠ¸ ì…ë ¥ ê°€ëŠ¥
- QR ì½”ë“œ: ì´ë²¤íŠ¸ ì´ˆëŒ€ ë§í¬ ê¸°ë°˜ QR ì½”ë“œ ë‹¤ìš´ë¡œë“œ ë²„íŠ¼

#### íƒœìŠ¤í¬

**4-1. ì¸ì•± ì•Œë¦¼ ì‹œìŠ¤í…œ**

- [ ] Supabase migration: `notifications` í…Œì´ë¸” ìƒì„± (`id`, `user_id` FK, `event_id` FK, `type` text, `message` text, `is_read` boolean, `created_at`) | ë‹´ë‹¹: ë°±ì—”ë“œ | ì˜ˆìƒ: 1d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„
- [ ] RLS ì •ì±…: SELECT/UPDATE ë³¸ì¸ í–‰ë§Œ, INSERTëŠ” ì„œë²„ ì•¡ì…˜ ì „ìš© | ë‹´ë‹¹: ë°±ì—”ë“œ | ì˜ˆìƒ: 0.5d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„
- [ ] `app/(protected)/events/actions.ts` ìˆ˜ì •: `joinEvent` ì™„ë£Œ í›„ ì£¼ìµœìì—ê²Œ ì•Œë¦¼ INSERT (`new_participant`), `approveParticipant`/`rejectParticipant` ì™„ë£Œ í›„ ì°¸ì—¬ìì—ê²Œ ì•Œë¦¼ INSERT | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 1d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„
- [ ] `app/(protected)/layout.tsx` ìˆ˜ì •: ë„¤ë¹„ê²Œì´ì…˜ì— ì•Œë¦¼ ë²¨ ì•„ì´ì½˜ ì¶”ê°€, ë¯¸ì½ ì•Œë¦¼ ìˆ˜ í‘œì‹œ | ë‹´ë‹¹: í”„ë¡ íŠ¸ì—”ë“œ | ì˜ˆìƒ: 1d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„
- [ ] `app/(protected)/notifications/page.tsx` ì‹ ê·œ ìƒì„±: ì•Œë¦¼ ëª©ë¡, í´ë¦­ ì‹œ í•´ë‹¹ ì´ë²¤íŠ¸ë¡œ ì´ë™ ë° ì½ìŒ ì²˜ë¦¬ | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 1.5d | ìš°ì„ ìˆœìœ„: ğŸŸ¡ì¤‘ê°„

**4-2. ëŒ€ê¸°ì—´ ê´€ë¦¬**

- [ ] Supabase migration: `event_participants` í…Œì´ë¸”ì— `queue_position integer DEFAULT NULL` ì»¬ëŸ¼ ì¶”ê°€ | ë‹´ë‹¹: ë°±ì—”ë“œ | ì˜ˆìƒ: 0.5d | ìš°ì„ ìˆœìœ„: ğŸŸ¢ë‚®ìŒ
- [ ] `app/(protected)/events/actions.ts` ìˆ˜ì •: `joinEvent`ì—ì„œ ì •ì› ì´ˆê³¼ ì‹œ ëŒ€ê¸° ë“±ë¡ ë¶„ê¸° ì¶”ê°€ (queue_position ìë™ ë¶€ì—¬, `approval` ì´ë²¤íŠ¸ì—ë§Œ í—ˆìš©) | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 1.5d | ìš°ì„ ìˆœìœ„: ğŸŸ¢ë‚®ìŒ
- [ ] `app/(protected)/events/actions.ts` ìˆ˜ì •: ì°¸ì—¬ ì·¨ì†Œ/ê±°ì ˆ ì²˜ë¦¬ ì‹œ ëŒ€ê¸°ì—´ 1ë²ˆ ì°¸ì—¬ìì—ê²Œ ìë™ ì•Œë¦¼ ë°œì†¡ | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 1d | ìš°ì„ ìˆœìœ„: ğŸŸ¢ë‚®ìŒ

**4-3. ì´ë²¤íŠ¸ í‰ê°€/ë¦¬ë·°**

- [ ] Supabase migration: `event_reviews` í…Œì´ë¸” ìƒì„± (`id`, `event_id` FK, `reviewer_id` FK, `rating` smallint, `comment` text, `created_at`) | ë‹´ë‹¹: ë°±ì—”ë“œ | ì˜ˆìƒ: 0.5d | ìš°ì„ ìˆœìœ„: ğŸŸ¢ë‚®ìŒ
- [ ] `app/(protected)/events/actions.ts` ìˆ˜ì •: `completeEvent` Server Action ì¶”ê°€ (ì£¼ìµœì ì „ìš©, status â†’ `completed`) | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.5d | ìš°ì„ ìˆœìœ„: ğŸŸ¢ë‚®ìŒ
- [ ] ì™„ë£Œëœ ì´ë²¤íŠ¸ ìƒì„¸ í˜ì´ì§€ì—ì„œ ìŠ¹ì¸ëœ ì°¸ì—¬ìì—ê²Œ "í‰ê°€ ë‚¨ê¸°ê¸°" UI ì¶”ê°€ | ë‹´ë‹¹: í”„ë¡ íŠ¸ì—”ë“œ | ì˜ˆìƒ: 1.5d | ìš°ì„ ìˆœìœ„: ğŸŸ¢ë‚®ìŒ

**4-4. QR ì½”ë“œ ì²´í¬ì¸**

- [ ] `qrcode.react` npm íŒ¨í‚¤ì§€ ì„¤ì¹˜ | ë‹´ë‹¹: í’€ìŠ¤íƒ | ì˜ˆìƒ: 0.25d | ìš°ì„ ìˆœìœ„: ğŸŸ¢ë‚®ìŒ
- [ ] `components/events/invite-code-display.tsx` ìˆ˜ì •: ì´ˆëŒ€ ë§í¬ URL ê¸°ë°˜ QR ì½”ë“œ ìƒì„± ë° PNG ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ì¶”ê°€ | ë‹´ë‹¹: í”„ë¡ íŠ¸ì—”ë“œ | ì˜ˆìƒ: 0.75d | ìš°ì„ ìˆœìœ„: ğŸŸ¢ë‚®ìŒ

---

## ì „ì²´ ì¼ì • ìš”ì•½

| Phase   | ë‚´ìš©                                         | ê¸°ê°„  | ëˆ„ì   | ìš°ì„ ìˆœìœ„ |
| ------- | -------------------------------------------- | ----- | ----- | -------- |
| Phase 1 | ë²„ê·¸ ìˆ˜ì • ë° ì—£ì§€ì¼€ì´ìŠ¤ ì²˜ë¦¬                 | 1ì£¼   | 1ì£¼   | í•„ìˆ˜     |
| Phase 2 | UX í’ˆì§ˆ ê°œì„  (toast, ì—­í•  ë°°ì§€, ì—ëŸ¬ ë©”ì‹œì§€) | 1ì£¼   | 2ì£¼   | í•„ìˆ˜     |
| Phase 3 | ì‹ ê·œ ê¸°ëŠ¥ (ë³µì œ, í•„í„°, ì¶œì„, ê±°ì ˆ ì‚¬ìœ )      | 2ì£¼   | 4ì£¼   | ê¶Œì¥     |
| Phase 4 | ê³ ê¸‰ ê¸°ëŠ¥ (ì•Œë¦¼, ëŒ€ê¸°ì—´, í‰ê°€, QR)           | 3~4ì£¼ | 7~8ì£¼ | ì„ íƒ     |

> 1ì¸ í’€ìŠ¤íƒ ê°œë°œ ê¸°ì¤€. Phase 3 í•˜ìœ„ íƒœìŠ¤í¬ëŠ” ë…ë¦½ì ìœ¼ë¡œ ë³‘ë ¬ ì§„í–‰ ê°€ëŠ¥.

---

## ê¸°ìˆ ì  ì˜ì¡´ì„±

```
Phase 1 (ë²„ê·¸ ìˆ˜ì •)
    |
    +-- Phase 2 (UX ê°œì„ )
            |
            +-- Phase 3 (ì‹ ê·œ ê¸°ëŠ¥)
                    |
                    +-- 3-1 ì´ë²¤íŠ¸ ë³µì œ       â† ë…ë¦½
                    +-- 3-2 í•„í„°/ê²€ìƒ‰         â† ë…ë¦½
                    +-- 3-3 ì¶œì„ ì²´í¬         â† DB migration ì„ í–‰ í•„ìš”
                    +-- 3-4 ê±°ì ˆ ì‚¬ìœ          â† DB migration ì„ í–‰ í•„ìš” (3-3ê³¼ ë¬¶ì–´ì„œ ì²˜ë¦¬ ê¶Œì¥)
                            |
                            +-- Phase 4 (ê³ ê¸‰ ê¸°ëŠ¥)
```

**í•µì‹¬ ì˜ì¡´ ê´€ê³„**

- Phase 1 `host_id` í•„ë“œ ì¶”ê°€ ì—†ì´ invite í˜ì´ì§€ ì£¼ìµœì ë¶„ê¸° ë¶ˆê°€
- Phase 3 ì¶œì„ ì²´í¬ / ê±°ì ˆ ì‚¬ìœ ëŠ” DB migration + íƒ€ì… ì¬ìƒì„± ì„ í–‰ í•„ìˆ˜
- Phase 4 ì•Œë¦¼ ì‹œìŠ¤í…œì€ Phase 1ì˜ ì„œë²„ ì•¡ì…˜ êµ¬ì¡° ì •ë¹„ ì´í›„ êµ¬í˜„ ê¶Œì¥
- Phase 4 ëŒ€ê¸°ì—´ì€ Phase 1 `joinEvent` ìƒíƒœ ê²€ì¦ ê°•í™” ì´í›„ êµ¬í˜„ í•„ìˆ˜

---

## ì˜í–¥ ë°›ëŠ” íŒŒì¼ ìš”ì•½

### Phase 1

| íŒŒì¼                                      | ë³€ê²½ ìœ í˜• | ë‚´ìš©                                                                                                                                |
| ----------------------------------------- | --------- | ----------------------------------------------------------------------------------------------------------------------------------- |
| `app/invite/[code]/page.tsx`              | ìˆ˜ì •      | isHost ë¶„ê¸° ì¶”ê°€, HostActionPanel í‘œì‹œ                                                                                              |
| `app/(protected)/events/schemas.ts`       | ìˆ˜ì •      | InviteEventDataì— host_id ì¶”ê°€                                                                                                      |
| `app/(protected)/events/actions.ts`       | ìˆ˜ì •      | getEventByInviteCode host_id í¬í•¨, joinEvent ìƒíƒœ ê²€ì¦, approveParticipant/rejectParticipant ì´ì¤‘ì²˜ë¦¬ ë°©ì§€, createEvent ì´ë¯¸ì§€ ë¡¤ë°± |
| `components/events/host-action-panel.tsx` | ì‹ ê·œ      | invite í˜ì´ì§€ ì£¼ìµœììš© ê´€ë¦¬ ì•¡ì…˜ íŒ¨ë„                                                                                               |
| `lib/supabase/storage-server.ts`          | ì‹ ê·œ      | ì„œë²„ ì•¡ì…˜ìš© ì´ë¯¸ì§€ ì‚­ì œ í—¬í¼                                                                                                        |

### Phase 2

| íŒŒì¼                                                | ë³€ê²½ ìœ í˜• | ë‚´ìš©                                                         |
| --------------------------------------------------- | --------- | ------------------------------------------------------------ |
| `app/layout.tsx`                                    | ìˆ˜ì •      | Sonner Toaster ì¶”ê°€                                          |
| `lib/hooks/use-action-toast.ts`                     | ì‹ ê·œ      | ì„œë²„ ì•¡ì…˜ ê²°ê³¼ â†’ toast ì—°ê²° ìœ í‹¸ í›…                          |
| `components/events/participant-list.tsx`            | ìˆ˜ì •      | alert() ì œê±°, toast ì „í™˜                                     |
| `components/events/cancel-event-button.tsx`         | ìˆ˜ì •      | toast í†µì¼                                                   |
| `components/events/cancel-participation-button.tsx` | ìˆ˜ì •      | toast í†µì¼                                                   |
| `app/(protected)/events/actions.ts`                 | ìˆ˜ì •      | getAllEvents myRole ë°˜í™˜, cancelParticipation ìƒíƒœ ê²€ì¦ ì¶”ê°€ |
| `components/events/event-card.tsx`                  | ìˆ˜ì •      | myRole prop ì¶”ê°€, ì—­í•  ë°°ì§€ í‘œì‹œ                             |
| `app/(protected)/events/page.tsx`                   | ìˆ˜ì •      | myRole ì „ë‹¬                                                  |

### Phase 3

| íŒŒì¼                                          | ë³€ê²½ ìœ í˜• | ë‚´ìš©                                                                                        |
| --------------------------------------------- | --------- | ------------------------------------------------------------------------------------------- |
| `app/(protected)/events/actions.ts`           | ìˆ˜ì •      | duplicateEvent, toggleAttendance, rejectParticipant reason ì¶”ê°€, getAllEvents í•„í„° íŒŒë¼ë¯¸í„° |
| `app/(protected)/events/new/page.tsx`         | ìˆ˜ì •      | ?from= íŒŒë¼ë¯¸í„°ë¡œ ë³µì œ prefill                                                              |
| `app/(protected)/events/[id]/page.tsx`        | ìˆ˜ì •      | ë³µì œ ë²„íŠ¼ ì¶”ê°€                                                                              |
| `app/(protected)/events/schemas.ts`           | ìˆ˜ì •      | ParticipantWithProfileì— attended í•„ë“œ ì¶”ê°€                                                 |
| `components/events/event-filter.tsx`          | ì‹ ê·œ      | í•„í„°/ê²€ìƒ‰ UI ì»´í¬ë„ŒíŠ¸                                                                       |
| `components/events/reject-dialog.tsx`         | ì‹ ê·œ      | ê±°ì ˆ ì‚¬ìœ  ì…ë ¥ AlertDialog                                                                  |
| `components/events/participant-list.tsx`      | ìˆ˜ì •      | ì¶œì„ ì²´í¬ë°•ìŠ¤, RejectDialog ì—°ê²°, rejection_reason í‘œì‹œ                                     |
| `app/(protected)/events/[id]/manage/page.tsx` | ìˆ˜ì •      | showAttendance prop ì „ë‹¬                                                                    |
| `app/(protected)/events/page.tsx`             | ìˆ˜ì •      | searchParams ê¸°ë°˜ í•„í„° ì „ë‹¬                                                                 |
| `lib/types/database.ts`                       | ì¬ìƒì„±    | attended, rejection_reason ì»¬ëŸ¼ íƒ€ì… ê°±ì‹                                                    |

---

## ë¦¬ìŠ¤í¬ ë° ì™„í™” ì „ëµ

| ë¦¬ìŠ¤í¬                                                       | ì˜í–¥ë„ | ë°œìƒ ê°€ëŠ¥ì„± | ì™„í™” ì „ëµ                                                                                                     |
| ------------------------------------------------------------ | ------ | ----------- | ------------------------------------------------------------------------------------------------------------- |
| `approveParticipant` Race Condition (ë™ì‹œ ìš”ì²­ ì‹œ ì •ì› ì´ˆê³¼) | ë†’ìŒ   | ì¤‘ê°„        | DB ë ˆë²¨ `CHECK` ì œì•½ ë˜ëŠ” PostgreSQL function + `LOCK` í™œìš©, Phase 1 êµ¬í˜„ ì „ ë°©ì‹ ê²°ì • í•„ìˆ˜                   |
| ì´ë¯¸ì§€ ë¡¤ë°± ì‹¤íŒ¨ (Storage ì‚­ì œ ì¤‘ ì—ëŸ¬)                      | ì¤‘ê°„   | ë‚®ìŒ        | ì‚­ì œ ì‹¤íŒ¨ ì‹œ ë¡œê·¸ë§Œ ê¸°ë¡í•˜ê³  ì‚¬ìš©ìì—ê²ŒëŠ” ì´ë²¤íŠ¸ ì €ì¥ ì„±ê³µìœ¼ë¡œ ì²˜ë¦¬, ê³ ì•„ íŒŒì¼ì€ ì •ê¸° ì •ë¦¬ ìŠ¤í¬ë¦½íŠ¸ ë³„ë„ ìš´ì˜ |
| Phase 3 DB migration í›„ íƒ€ì… ë¯¸ê°±ì‹                           | ì¤‘ê°„   | ë†’ìŒ        | migration ì´í›„ ì¦‰ì‹œ `npx supabase gen types typescript` ì‹¤í–‰ ê·œì¹™ ë¬¸ì„œí™”                                      |
| Sonner toastì™€ ê¸°ì¡´ í¼ ì—ëŸ¬ UI ì´ì¤‘ í‘œì‹œ                     | ë‚®ìŒ   | ì¤‘ê°„        | ì„œë²„ ì•¡ì…˜ ì—ëŸ¬ëŠ” toast ì „ë‹´, í¼ ê²€ì¦ ì—ëŸ¬ëŠ” ì¸ë¼ì¸ ìœ ì§€ë¡œ ì—­í•  ë¶„ë¦¬ ëª…í™•í™”                                    |
| Phase 4 ì•Œë¦¼ í…Œì´ë¸” RLS ì •ì±… ë³µì¡ë„                          | ì¤‘ê°„   | ì¤‘ê°„        | ì•Œë¦¼ INSERTë¥¼ ì„œë²„ ì•¡ì…˜ì—ì„œ ì§ì ‘ ì²˜ë¦¬í•˜ê³  `auth.uid()` ê¸°ë°˜ ì •ì±…ìœ¼ë¡œ ì„¤ê³„                                     |

---

## ë³´ë¥˜ ì‚¬í•­ ë° ë¯¸ê²° ì§ˆë¬¸

### ê²°ì • í•„ìš” ì‚¬í•­

1. **approveParticipant Race Condition ì²˜ë¦¬ ë°©ì‹**: ì„œë²„ ì•¡ì…˜ì˜ `count â†’ update` íŒ¨í„´ì€ ë™ì‹œ ìš”ì²­ ì‹œ Race Condition ë°œìƒ ê°€ëŠ¥.
   DB íŠ¸ë¦¬ê±°(`BEFORE UPDATE`)ë¡œ ì •ì› ì²´í¬í•˜ê±°ë‚˜ PostgreSQL í•¨ìˆ˜ + `FOR UPDATE` LOCK ì ìš© ì—¬ë¶€ ê²°ì • í•„ìš”.
   â†’ **Phase 1 êµ¬í˜„ ì „ ê²°ì • ê¶Œì¥**

2. **ì´ë²¤íŠ¸ ë³µì œ ì‹œ ë‚ ì§œ ì²˜ë¦¬**: ë³µì œëœ ì´ë²¤íŠ¸ì˜ ë‚ ì§œë¥¼ ë¹ˆê°’ìœ¼ë¡œ ê°•ì œ ë¦¬ì…‹í• ì§€,
   ê¸°ì¡´ ë‚ ì§œ ìœ ì§€ í›„ ì‚¬ìš©ìê°€ ì§ì ‘ ìˆ˜ì •í•˜ë„ë¡ í• ì§€.
   (í˜„ì¬ ì„¤ê³„: ë¹ˆê°’ ë¦¬ì…‹ â€” ì´ë¯¸ ì§€ë‚œ ë‚ ì§œë¡œ ìƒì„±ë˜ëŠ” ê²ƒ ë°©ì§€)

3. **Phase 3 í•„í„°/ê²€ìƒ‰ ì ìš© ë²”ìœ„**: "ì „ì²´ ì´ë²¤íŠ¸" íƒ­ì—ë§Œ ì ìš©í• ì§€, "ë‚´ ì´ë²¤íŠ¸", "ì°¸ì—¬ ì¤‘" íƒ­ì—ë„ ì ìš©í• ì§€.
   (í˜„ì¬ ì„¤ê³„: ì „ì²´ ì´ë²¤íŠ¸ íƒ­ì—ë§Œ ì ìš©)

### ë²”ìœ„ ì™¸ ê¸°ëŠ¥ (v3 ì´í›„)

- ì´ë©”ì¼/í‘¸ì‹œ ì•Œë¦¼ (Supabase Edge Function + resend ë˜ëŠ” APNS/FCM)
- ì´ë²¤íŠ¸ ê³µê°œ ëª©ë¡ (í˜„ì¬ëŠ” ì´ˆëŒ€ ì½”ë“œë¡œë§Œ ì ‘ê·¼)
- í”„ë¡œí•„ ìƒì„¸ ê´€ë¦¬ (ì•„ë°”íƒ€ ì—…ë¡œë“œ, ìê¸°ì†Œê°œ)
- ì¹´í’€ ë§¤ì¹­, ì •ì‚°/ê²°ì œ ì—°ë™

---

## ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ       | ë³€ê²½ ë‚´ìš©                                                                                                                                                                                                                                                                 |
| ---- | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| v2.3 | 2026-02-27 | Phase 2 ì™„ë£Œ ì²˜ë¦¬ (Sonner toast ì„¤ì¹˜, use-action-toast í›… ìƒì„±, ParticipantList/CancelEventButton/CancelParticipationButton alert() â†’ toast ì „í™˜, getAllEvents myRole ë°˜í™˜, EventCard ì—­í•  ë°°ì§€ ì¶”ê°€, cancelParticipation ì´ë¯¸ ì·¨ì†Œëœ ì°¸ì—¬ ì—ëŸ¬ ì²˜ë¦¬, alert() 0ê±´ í™•ì¸)   |
| v2.2 | 2026-02-27 | Phase 3 ì™„ë£Œ ì²˜ë¦¬ (DB migration: attended+rejection_reason ì»¬ëŸ¼ ì¶”ê°€, íƒ€ì… ì¬ìƒì„±, toggleAttendance/rejectParticipant(reason)/getAllEvents(filter) ì„œë²„ ì•¡ì…˜ ì¶”ê°€/ìˆ˜ì •, EventFilter/RejectDialog ì»´í¬ë„ŒíŠ¸ ì‹ ê·œ ìƒì„±, ParticipantList ìˆ˜ì •, ì´ë²¤íŠ¸ ë³µì œ ë²„íŠ¼+prefill ì§€ì›) |
| v2.1 | 2026-02-26 | Phase 1 ì™„ë£Œ ì²˜ë¦¬ (invite í˜ì´ì§€ ì£¼ìµœì ë¶„ê¸°/HostActionPanel ì‹ ê·œ ìƒì„±, joinEvent ìƒíƒœ ê²€ì¦ ê°•í™”, approveParticipant/rejectParticipant ì´ì¤‘ ì²˜ë¦¬ ë°©ì§€, createEvent ì´ë¯¸ì§€ ë¡¤ë°±, storage-server.ts ì‹ ê·œ ìƒì„±)                                                              |
| v2.0 | 2026-02-26 | v1 Phase 0~4 ì™„ë£Œ ê¸°ì¤€ìœ¼ë¡œ v2 ìµœì´ˆ ì‘ì„±. Phase 1(ë²„ê·¸/ì—£ì§€ì¼€ì´ìŠ¤), Phase 2(UX í†µì¼), Phase 3(ì‹ ê·œ ê¸°ëŠ¥), Phase 4(ê³ ê¸‰ ê¸°ëŠ¥) 4ë‹¨ê³„ ë¡œë“œë§µ ì„¤ê³„. ë°°í¬ ì œì™¸.                                                                                                                 |
